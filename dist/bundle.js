(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=require("http");var n=e.n(t);const r=require("crypto");var o=e.n(r);const s={randomUUID:o().randomUUID},a=new Uint8Array(256);let i=a.length;function d(){return i>a.length-16&&(o().randomFillSync(a),i=0),a.slice(i,i+=16)}const u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).slice(1));const c=function(e,t,n){if(s.randomUUID&&!t&&!e)return s.randomUUID();const r=(e=e||{}).random||(e.rng||d)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return function(e,t=0){return(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase()}(r)},p={};function l(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function f(e,t,n){e.statusCode=t,e.setHeader("Content-Type","application/json"),e.end(JSON.stringify({error:n}))}const y=process.env.PORT||5e3;n().createServer((function(e,t){const{method:n,url:r}=e;"GET"===n&&"/api/users"===r?function(e,t){try{const e=Object.values(p);t.statusCode=200,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify(e))}catch(e){f(t,500,"Internal server error")}}(0,t):"GET"===n&&r?.startsWith("/api/users/")?function(e,t){try{const{url:n}=e,r=n.split("/")[3];if(!l(r))return t.statusCode=400,t.setHeader("Content-Type","application/json"),void t.end(JSON.stringify({error:"Invalid userId"}));const o=p[r];if(!o)return t.statusCode=404,t.setHeader("Content-Type","application/json"),void t.end(JSON.stringify({error:"User not found"}));t.statusCode=200,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify(o))}catch(e){f(t,500,"Internal server error")}}(e,t):"POST"===n&&"/api/users"===r?function(e,t){try{let n="";e.on("data",(e=>{n+=e})),e.on("end",(()=>{const{username:e,age:r,hobbies:o}=JSON.parse(n);if(!e||!r||!o)return t.statusCode=400,t.setHeader("Content-Type","application/json"),void t.end(JSON.stringify({error:"Username, age, and hobbies are required"}));const s=c(),a={id:s,username:e,age:r,hobbies:o};p[s]=a,t.statusCode=201,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify(a))}))}catch(e){f(t,500,"Internal server error")}}(e,t):"PUT"===n&&r?.startsWith("/api/users/")?function(e,t){try{const{url:n}=e,r=n.split("/")[3];if(!l(r))return t.statusCode=400,t.setHeader("Content-Type","application/json"),void t.end(JSON.stringify({error:"Invalid userId"}));const o=p[r];if(!o)return t.statusCode=404,t.setHeader("Content-Type","application/json"),void t.end(JSON.stringify({error:"User not found"}));let s="";e.on("data",(e=>{s+=e})),e.on("end",(()=>{const{username:e,age:n,hobbies:r}=JSON.parse(s);e&&(o.username=e),n&&(o.age=n),r&&(o.hobbies=r),t.statusCode=200,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify(o))}))}catch(e){f(t,500,"Internal server error")}}(e,t):"DELETE"===n&&r?.startsWith("/api/users/")?function(e,t){try{const{url:n}=e,r=n.split("/")[3];if(!l(r))return t.statusCode=400,t.setHeader("Content-Type","application/json"),void t.end(JSON.stringify({error:"Invalid userId"}));if(!p[r])return t.statusCode=404,t.setHeader("Content-Type","application/json"),void t.end(JSON.stringify({error:"User not found"}));delete p[r],t.statusCode=204,t.end()}catch(e){f(t,500,"Internal server error")}}(e,t):(t.statusCode=404,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({error:"Endpoint not found"})))})).listen(y,(()=>{console.log(`Server listening on port ${y}`)}))})();